<view class="container data-v-368aef34"><block wx:if="{{goods}}"><view class="main data-v-368aef34"><view class="nav data-v-368aef34"><view class="header data-v-368aef34"><view class="left overflow-hidden data-v-368aef34"><block wx:if="{{takeType=='外卖配送'}}"><view class="d-flex align-items-center overflow-hidden data-v-368aef34"><image class="mr-10 data-v-368aef34" style="width:30rpx;height:30rpx;" src="/static/images/order/location.png"></image><block wx:if="{{!userInfo}}"><text data-event-opts="{{[['tap',[['toLogin']]]]}}" bindtap="__e" class="data-v-368aef34">去登录</text></block><block wx:else><text class="data-v-368aef34">{{userInfo.address&&userInfo.address!=''?userInfo.address:'请完善用户信息'}}</text></block></view></block></view><view class="right data-v-368aef34"><view data-event-opts="{{[['tap',[['takein',['$event']]]]]}}" class="{{['dinein','data-v-368aef34',(takeType!='外卖配送')?'active':'']}}" bindtap="__e"><text class="data-v-368aef34">到店自取</text></view><view data-event-opts="{{[['tap',[['takeout',['$event']]]]]}}" class="{{['takeout','data-v-368aef34',(takeType=='外卖配送')?'active':'']}}" bindtap="__e"><text class="data-v-368aef34">外卖配送</text></view></view></view><view class="coupon data-v-368aef34"><text class="title data-v-368aef34">{{appProperties.shopNotice}}</text></view></view><view class="content data-v-368aef34"><scroll-view class="menus data-v-368aef34" scroll-into-view="{{menuScrollIntoView}}" scroll-with-animation="{{true}}" scroll-y="{{true}}"><view class="wrapper data-v-368aef34"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['menu','data-v-368aef34',(item.$orig.goodsCategoryName===currentCategoryName)?'current':'']}}" id="{{'menu-'+item.$orig.goodsCategoryName}}" data-event-opts="{{[['tap',[['handleMenuTap',['$0'],[[['goods','',index,'goodsCategoryName']]]]]]]}}" bindtap="__e"><text class="data-v-368aef34">{{item.$orig.goodsCategoryName}}</text><view hidden="{{!(item.m0)}}" class="dot data-v-368aef34">{{item.m1}}</view></view></block></view></scroll-view><scroll-view class="goods data-v-368aef34" scroll-with-animation="{{true}}" scroll-y="{{true}}" scroll-top="{{categoryScrollTop}}" data-event-opts="{{[['scroll',[['handleGoodsScroll',['$event']]]]]}}" bindscroll="__e"><view class="wrapper data-v-368aef34"><view class="list data-v-368aef34"><block wx:for="{{$root.l2}}" wx:for-item="category" wx:for-index="index" wx:key="index"><view id="categoryParent" class="data-v-368aef34"><view class="category data-v-368aef34" id="categoryMenu"><view class="data-v-368aef34"><text class="title data-v-368aef34">{{category.$orig.goodsCategoryName}}</text></view><view class="items data-v-368aef34"><block wx:for="{{category.l1}}" wx:for-item="goods" wx:for-index="key" wx:key="key"><block wx:if="{{category.$orig.goodsCategoryShow}}"><view class="good data-v-368aef34"><image class="image data-v-368aef34" src="{{goodsImageBaseUrl+goods.$orig.image}}" data-event-opts="{{[['tap',[['showGoodDetailModal',['$0'],[[['goods','',index],['goodsList','',key]]]]]]]}}" bindtap="__e"></image><view class="right data-v-368aef34"><text class="name data-v-368aef34">{{goods.$orig.name}}</text><text class="tips data-v-368aef34">{{goods.$orig.description&&goods.$orig.description!=''?goods.$orig.description:goods.$orig.name}}</text><view class="price_and_action data-v-368aef34"><text class="price data-v-368aef34">{{"￥"+goods.$orig.defaultPrice/100}}</text><block wx:if="{{goods.$orig.isSell}}"><view class="data-v-368aef34"><block wx:if="{{goods.$orig.goodsPropertyVos&&goods.$orig.goodsPropertyVos.length}}"><view class="btn-group data-v-368aef34"><button class="btn property_btn data-v-368aef34" type="primary" hover-class="none" size="mini" data-event-opts="{{[['tap',[['showGoodDetailModal',['$0'],[[['goods','',index],['goodsList','',key]]]]]]]}}" bindtap="__e">选规格</button><view hidden="{{!(goods.m2)}}" class="dot data-v-368aef34">{{goods.m3}}</view></view></block><block wx:else><view class="btn-group data-v-368aef34"><button hidden="{{!(goods.m4)}}" class="btn reduce_btn data-v-368aef34" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['handleReduceFromCart',['$0'],[[['goods','',index],['goodsList','',key]]]]]]]}}" bindtap="__e"><view class="iconfont iconsami-select data-v-368aef34"></view></button><view hidden="{{!(goods.m5)}}" class="number data-v-368aef34">{{goods.m6}}</view><button class="btn add_btn data-v-368aef34" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['handleAddToCart',['$0'],[[['goods','',index],['goodsList','',key]]]]]]]}}" bindtap="__e"><view class="iconfont iconadd-select data-v-368aef34"></view></button></view></block></view></block><block wx:else><view class="data-v-368aef34"><view class="btn-group data-v-368aef34"><button class="btn property_btn data-v-368aef34" style="text-decoration:line-through;" type="primary" disabled="{{true}}" size="mini">已售空</button></view></view></block></view></view></view></block></block></view></view></view></block></view></view></scroll-view></view><block wx:if="{{cart&&cart.length}}"><view class="cart-box data-v-368aef34"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="mark data-v-368aef34" bindtap="__e"><image class="cart-img data-v-368aef34" src="/static/images/menu/cart.png"></image><view class="tag data-v-368aef34">{{getCartGoodsNumber}}</view></view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="price data-v-368aef34" bindtap="__e">{{"￥"+getCartGoodsPrice/100}}</view><block wx:if="{{!appProperties.shopStatus}}"><view class="data-v-368aef34"><button class="pay-btn data-v-368aef34" type="primary" disabled="{{true}}">商家休息中</button></view></block><block wx:else><block wx:if="{{$root.g0}}"><view class="data-v-368aef34"><button class="pay-btn data-v-368aef34" type="primary" disabled="{{disabledPay}}" data-event-opts="{{[['tap',[['toPay']]]]}}" bindtap="__e">{{disabledPay?'差'+spread/100+'元起送':'去结算'}}</button></view></block><block wx:else><view class="data-v-368aef34"><button class="pay-btn data-v-368aef34" type="primary" disabled="{{true}}">未在营业时段</button></view></block></block></view></block></view></block><modal class="good-detail-modal data-v-368aef34" vue-id="9ad1f540-1" show="{{goodDetailModalVisible}}" color="#5A5B5C" width="90%" custom="{{true}}" padding="0rpx" radius="12rpx" bind:__l="__l" vue-slots="{{['default']}}"><view class="cover data-v-368aef34"><block wx:if="{{currentGoods.image}}"><image class="image data-v-368aef34" src="{{goodsImageBaseUrl+currentGoods.image}}"></image></block><view class="btn-group data-v-368aef34"><image src="/static/images/menu/share-goodspng" class="data-v-368aef34"></image><image src="/static/images/menu/close.png" data-event-opts="{{[['tap',[['closeGoodDetailModal',['$event']]]]]}}" bindtap="__e" class="data-v-368aef34"></image></view></view><scroll-view class="detail data-v-368aef34" style="padding-bottom:100px;" scroll-y="{{true}}"><view class="wrapper data-v-368aef34"><view class="basic data-v-368aef34"><view class="name data-v-368aef34">{{currentGoods.name}}</view><view class="tips data-v-368aef34">{{currentGoods.description}}</view></view><block wx:if="{{currentGoods.goodsPropertyVos&&currentGoods.goodsPropertyVos.length}}"><view class="properties data-v-368aef34"><block wx:for="{{currentGoods.goodsPropertyVos}}" wx:for-item="goodsPropertyVo" wx:for-index="index" wx:key="index"><view class="property data-v-368aef34"><view class="title data-v-368aef34"><text class="name data-v-368aef34"><block wx:if="{{goodsPropertyVo.required}}"><text style="color:red;" class="data-v-368aef34">*</text></block>{{''+goodsPropertyVo.category+''}}</text></view><view class="values data-v-368aef34"><block wx:for="{{goodsPropertyVo.propertyList}}" wx:for-item="property" wx:for-index="index2" wx:key="index2"><view data-event-opts="{{[['tap',[['changePropertyDefault',[index,index2]]]]]}}" class="{{['value','data-v-368aef34',(property.isDefault)?'default':'']}}" bindtap="__e">{{''+property.propertyOption+"\n\t\t\t\t\t\t\t\t"+(property.rebasePrice?'￥'+property.rebasePrice/100:property.extraPrice/100?'￥'+property.extraPrice/100:'')+''}}</view></block></view></view></block></view></block></view></scroll-view><view class="action data-v-368aef34"><view class="left data-v-368aef34"><view class="price data-v-368aef34">{{"￥"+currentGoods.realPrice/100}}</view><block wx:if="{{$root.m7}}"><view class="props data-v-368aef34">{{$root.m8}}</view></block></view><view class="btn-group data-v-368aef34"><button class="btn data-v-368aef34" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['changeCurrentGoodsNumber',[-1]]]]]}}" bindtap="__e"><view class="iconfont iconsami-select data-v-368aef34"></view></button><view class="number data-v-368aef34">{{currentGoods.number}}</view><button class="btn data-v-368aef34" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['changeCurrentGoodsNumber',[1]]]]]}}" bindtap="__e"><view class="iconfont iconadd-select data-v-368aef34"></view></button></view></view><view data-event-opts="{{[['tap',[['addCurrentGoodsToCart']]]]}}" class="add-to-cart-btn data-v-368aef34" bindtap="__e"><view class="data-v-368aef34">确认</view></view></modal><popup-layer class="cart-popup data-v-368aef34" vue-id="9ad1f540-2" direction="top" show-pop="{{cartPopupVisible}}" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content" class="data-v-368aef34"><view class="top data-v-368aef34"><text data-event-opts="{{[['tap',[['handleCartClear',['$event']]]]]}}" bindtap="__e" class="data-v-368aef34">清空</text></view><scroll-view class="cart-list data-v-368aef34" scroll-y="{{true}}"><view class="wrapper data-v-368aef34"><block wx:for="{{$root.l3}}" wx:for-item="goods" wx:for-index="index" wx:key="index"><view class="item data-v-368aef34"><view class="left data-v-368aef34"><view class="name data-v-368aef34">{{goods.$orig.name}}</view><view class="props data-v-368aef34">{{goods.m9}}</view></view><view class="center data-v-368aef34"><text class="data-v-368aef34">{{"￥"+goods.$orig.realPrice/100}}</text></view><view class="right data-v-368aef34"><button class="btn data-v-368aef34" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['handleCartItemReduce',[index]]]]]}}" bindtap="__e"><view class="iconfont iconsami-select data-v-368aef34"></view></button><view class="number data-v-368aef34">{{goods.$orig.number}}</view><button class="btn data-v-368aef34" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['handleCartItemAdd',[index]]]]]}}" bindtap="__e"><view class="iconfont iconadd-select data-v-368aef34"></view></button></view></view></block><block wx:if="{{takeType=='外卖配送'}}"><view class="item data-v-368aef34"><view class="left data-v-368aef34"><view class="name data-v-368aef34">包装费</view></view><view class="center data-v-368aef34"><text class="data-v-368aef34">{{"￥"+appProperties.packingPrice/100}}</text></view><view class="left data-v-368aef34"><view class="name data-v-368aef34">配送费</view></view><view class="center data-v-368aef34"><text class="data-v-368aef34">{{"￥"+appProperties.sendingPrice/100}}</text></view></view></block></view></scroll-view></view></popup-layer></view>